<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsenui.css">
  <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsen-css-components.min.css">
  <link rel="stylesheet" type="text/css" href="css/styles.css">.
  <script src="https://unpkg.com/onsenui/js/onsenui.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"></script>
  <script type="text/javascript" src="js/appJ.js"></script> 
  <script type="text/javascript" src="js/list.js"></script>  
  <script type="text/javascript" src="js/search.js"></script>

  <title>YO C'EST NOTRE APP</title>
  <header>
    <h1>SEIZE THE MEANS OF PRODUCTION</h1>
  </header>

  </head>

<body style="background-image:url(back.jpg)" >

  <form autocomplete="off" action="/action_page.php">
    <div  class="autocomplete" style="width:300px;">
      <input id="myInput" type="text" name="myCountry" placeholder="Country">
    </div>
    <input type="button" value="SEIZE" onclick="appear()">
  </form>

  <div id ="myDIV">
  </div> 

  <script>
      function appear() {

        
        var promise1 = new Promise(function(resolve, reject) {
            performSearch(document.getElementById("myInput").value);
            setTimeout(function() {
                resolve('foo');
            }, 300);
        });

        // promise1.then(function(value) {
        //     console.log(value);
        //     // expected output: "foo"
        // }, function(error) { console.error(error); });

        // alert('a');

        promise1.then((successMessage) => {
            // successMessage is whatever we passed in the resolve(...) function above.
            // It doesn't have to be a string, but if it is only a succeed message, it probably will be.
            console.log("Yay! " + successMessage);
            //res = "Yay";
            document.getElementById("myDIV").innerHTML = 'res = ' + extractedRating;
        });
        

        // performSearch('beef').then(
        //     function(a) {res = 'a';},
        //     function(b) { res = 'b'; }
        // );
        // var x = document.getElementById("myDIV").innerHTML = //document.getElementById("myInput").value;
        //      res;

        // alert(res);
        
      }
  </script>

  <script> 
    autocomplete(document.getElementById("myInput"), countries);
  </script>


  <ons-card>
    <div class = "container">
        <canvas id="myChart" width="40" height="40"></canvas>
    </div>
  </ons-card>


  <script>
        var ctx = document.getElementById("myChart");
        ctx.height = 5;
        var myChart = new Chart(ctx, {
            type: 'pie',
            data: {
                labels: ["Red", "Blue", "Yellow", "Green", "Purple", "Orange"],
                datasets: [{
                    label: '# of Votes',
                    data: [12, 19, 3, 5, 2, 3],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(255, 206, 86, 0.2)',
                        'rgba(75, 192, 192, 0.2)',
                        'rgba(153, 102, 255, 0.2)',
                        'rgba(255, 159, 64, 0.2)'
                    ],
                    borderColor: [
                        'rgba(255,99,132,1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgba(255, 159, 64, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero:true
                        }
                    }]
                }
            }
        });
  </script>

</body>
</html>
